#! /bin/sh

# check LHS RHS EXPECTED
# ----------------------
# Check that aut-to-exp(difference(dterm(LHS), dterm(RHS))) == EXPECTED.
check ()
{
  run 0 '' -vcsn-derived-term -o lhs.gv -e "$1"
  run 0 '' -vcsn-derived-term -o rhs.gv -e "$2"
  run 0 '' -vcsn-difference   -o diff.gv -f lhs.gv rhs.gv
  run 0 "$3" -vcsn-aut-to-exp -f diff.gv
}


check '(a+b)*' 'b*'            'b*.a.(a+b)*'
check '(a+b)*' '(a+b)*b(a+b)*' 'a*'
check '(a+b)*' '(a+b)*'        '\z'

check 'a(ba)*' '(ab)*a' '\z'
