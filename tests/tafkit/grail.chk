#! /bin/sh

# grail FILE
# ---------
# Check that FAdo accepts FILE as a grail file.  Skip if we don't have
# FAdo.
if python -c 'from FAdo import grail' >/dev/null; then
  grail ()
  {
    run 0 ignore -python -c "from FAdo import grail; grail.importFromGrailFile('$1')"
  }
else
  grail ()
  {
    tap_skip 'FAdo not installed'
  }
fi

# check_gv_grail BASE
# -------------------
# Check that BASE.gv and BASE.fado convert in one another,
# and that FAdo read BASE.grail.
#
# FIXME: we cannot read Grail files, so far.
check_gv_grail ()
{
  grail $1.grail
  run 0 -f $1.grail -vcsn-cat -O grail -f $1.gv
#  run 0 -f $1.gv    -vcsn-cat -I grail -f $1.grail
}

check_gv_grail $medir/a

run 0 '' -vcsn-ladybird -O grail -o grail.gr 10
grail 'grail.gr'
