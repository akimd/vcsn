#! /bin/sh

# check IN < OUT
# --------------
# Check the conversion from Dot to FSM.
check ()
{
  cat >out.fsm
  cp out.fsm out.exp
  run 0 out.exp -vcsn-cat -O fsm -Af "$1"
  # Check that fstcompile is happy with it, as an acceptor.
  run 0 ignore -fstcompile --acceptor out.fsm
}

check $top_srcdir/share/vcsn/a1.gv <<EOF
0	2	0
2	2	1
2	2	2
2	3	1
3	4	2
4	4	1
4	4	2
4	1	0
1
EOF
