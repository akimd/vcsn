#! /bin/sh

## ----------------------------- ##
## Determinize simple automata.  ##
## ----------------------------- ##


for aut in a epsilon empty
do
  for complete in 0 1
  do
    # Putting an envvar definition before the call to a shell
    # function does not seem to behave as expected.
    export VCSN_ORIGINS=1
    run 0 -f $medir/$aut-det-$complete.gv \
      -vcsn determinize -f $medir/$aut.gv $complete
    unset VCSN_ORIGINS
    # Idempotence.  Remove the origins.
    perl -pi -0777 -e 's{/\*.*?\*/\n}{}sg' out.exp
    run 0 out.exp -vcsn determinize -f out.exp
  done
done
