#! /bin/sh


# fado FILE
# ---------
# Check that FAdo accepts FILE.  Skip if we don't have FAdo.
if python -c 'from FAdo import fa' >/dev/null; then
  fado ()
  {
    run 0 ignore -python -c "from FAdo import fa; fa.readFromFile('$1')"
  }
else
  fado ()
  {
    tap_skip 'FAdo not installed'
  }
fi


# check AUT
# ---------
# Check FAdo can be fed with AUT (in Dot format).
check ()
{
  run 0 ignore -vcsn-cat -f $1 -O fado -o aut.fa
  fado 'aut.fa'
}

# Check FAdo can be fed with ladybird-10.
run 0 ignore -vcsn-ladybird -O fado -o lady.fa 10
fado 'lady.fa'


check $top_srcdir/share/vcsn/lal_char_b/a1.gv


# check_gv_fado BASE
# ------------------
# Check that BASE.gv and BASE.fado convert in one another,
# and that FAdo read BASE.fado.
check_gv_fado ()
{
  fado $1.fado
  run 0 -f $1.fado -vcsn-cat -O fado -f $1.gv
  run 0 -f $1.gv   -vcsn-cat -I fado -f $1.fado
}

check_gv_fado $medir/dfa
check_gv_fado $medir/nfa
check_gv_fado $medir/enfa
