#! /bin/sh

# Do not run IPython under Valgrind.
unset PREPROG

# Look for an IPython for Python 3.
test='import sys
if sys.version_info.major < 3:
    raise ValueError("IPython not running Python 3: ", sys.version_info)'
for i in "ipython$PYTHON_VERSION" ipython3 ipython
do
    if ("$i" -c "$test"); then
        ipython=$i
        echo "using ipython=$ipython"
        break
    fi
done

if test x"$ipython" = x; then
    tap_skip "cannot find IPython for Python 3"
    exit 0
fi

run 0 ignore -vcsn run $ipython $srcdir/$me.ipy
