%context: b
%include: common-weights.rat

# Check letters classes in input.
[a] => a
[ac] => a+c
[abcd] => [a-d]
[dcba] => [a-d]
[abcdabcd] => [a-d]
[badcabcd] => [a-d]
[a-a] => a
[a-b] => a+b
[a-bc-d] => [a-d]

[b-a] ! invalid letter interval: b-a
[]    ! invalid empty letter class

[^] => [a-h]
[^a] => [b-h]
[^a-bgh] => [c-f]
[^a-cgh] => d+e+f
[^a-bd-h] => c
[^b-a] ! invalid letter interval: b-a
[^a-h] ! invalid empty letter class

# Check classes in output.
a+a+a => a+a+a
a+a+a+a => a+a+a+a
