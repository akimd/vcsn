%weight: br
%include: common-weights.rat

# Check the alphabets.
{c}a => {c}a
{a}x ! 1.4: invalid word: x: invalid letter: x
{x}a ! 1.1-4: 1.1: invalid word: x: invalid letter: x
a{x} ! 1.2-5: 1.1: invalid word: x: invalid letter: x

# Check associativities.
%atoms: letters
{a}b{c}d{a} => ({a}b.{c}d){a}
{a}bb{c}dd{a} => ({a}(b.b).{c}(d.d)){a}
{a}b.b{c}d.d{a} => {a}b.b.{c}d.{a}d
{a}ab*{c}ab*{d} => ({a}(a.(b*)).{c}(a.(b*))){d}
%atoms: words
{a}bb{c}dd{a} => ({a}(bb).{c}(dd)){a}
%atoms: letters

# Trivial identities: T_K in TAF-Kit's documentation.
{\z}a => \z
a{\z} => \z
{c}\z => \z
\z{c} => \z
{\e}a => a
a{\e} => a

# Trivial identities: A_K in TAF-Kit's documentation.
{c}{d}a => {c.d}a
{c}a{d} => {c.d}a
a{c}{d} => {c.d}a
({c}(a.b)){d} => {c}(a.b){d}

# Trivial identities: U_K in TAF-Kit's documentation.
\e{c} => {c}\e
ab({c}\e) => (a.b){c}
({c}\e)(ab) => {c}(a.b)

# Trivial identities: C_{at} in TAF-Kit's documentation.
\e{c} => {c}\e
a{c} => {c}a

# More complex computations.
{c}{d}a{\z}+{d}a{\e} => {d}a
