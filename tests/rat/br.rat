# -*- shell-script -*-

%weight: br
%include: common-weights.rat

# Check the alphabets.
<f>a => <f>a
<e>x ! 1.4: law_char: invalid value: x, unexpected x
<x>a ! 1.1-4: 1.1: law_char: invalid value: x, unexpected x
a<x> ! 1.2-5: 1.1: law_char: invalid value: x, unexpected x

# Check associativities.
%labels: letters
<e>b<f>d<e> => (<e>b<f>d)<e>
<e>bb<f>dd<e> => (<e>(bb)<f>(dd))<e>
<e>b.b<f>d.d<e> => <e>bb<f>d<e>d
<e>ab*<f>ab*<g> => (<e>(ab*)<f>(ab*))<g>
%labels: words
<e>bb<f>dd<e> => (<e>bb.<f>dd)<e>
%labels: letters

# Trivial identities: T_K in TAF-Kit's documentation.
<\z>a => \z
a<\z> => \z
<f>\z => \z
\z<f> => \z
<\e>a => a
a<\e> => a

# Trivial identities: A_K in TAF-Kit's documentation.
<f><g>a => <fg>a
<f>a<g> => <fg>a
a<f><g> => <fg>a
(<f>(a.b))<g> => <f>(ab)<g>

# Trivial identities: U_K in TAF-Kit's documentation.
\e<f> => <f>\e
ab(<f>\e) => (ab)<f>
(<f>\e)(ab) => <f>(ab)

# Trivial identities: C_<at> in TAF-Kit's documentation.
\e<f> => <f>\e
a<f> => <f>a

# "Trivial identities": intersection.
\z&<f>\e => \z
<f>\e&\z => \z

\z&<f>a => \z
<f>a&\z => \z

<e>\e&<f>\e => <ef>\e
<e>\e&<f>a => \z
<e>a&<f>\e => \z
<e>a&<f>a => <ef>a

# Complement: same precedence/behavior as *.
<e>a{c} => <e>a{c}
<e>(a+b){c} => <e>(a+b){c}

<e>a+<f>b{c} => <e>a+<f>b{c}
(<e>a+<f>b){c} => (<e>a+<f>b){c}

<e>(a*).<f>(b*){c} => <e>a*<f>(b*){c}
(<e>(a*).<f>(b*)){c} => (<e>a*<f>b*){c}

# "Trivial identities": complement.
(<e>a){c} => a{c}
(<e>(a+b)){c} => (a+b){c}

%labels: words
\z&<f>ac => \z
<f>ab&\z => \z

<e>\e&<f>ac => \z
<e>ab&<f>\e => \z
<e>ab&<f>ab => <e.f>ab
<e>ab&<f>ac => \z
%labels: letters

# Difference: same precedence as shuffle (but why???).
<e>a%(<f>b)* == (<e>a)%((<f>b)*)

# More complex computations.
<f><e>a<\z>+<e>a<\e> => <e>a
