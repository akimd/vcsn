#! /bin/sh

me=$(basename "$0")
medir=$(mktemp -d "/tmp/$me.XXXXXX") || exit 1

cat >$medir/isymbols.txt <<\EOFSM
\e	0
0	1
1	2
EOFSM

cat >$medir/transitions.fsm <<\EOFSM
0	0	0
0	0	1
0	1	1
1	1	0	2
1	1	1	2
1
EOFSM

fstcompile --acceptor \
  --keep_isymbols --isymbols=$medir/isymbols.txt \
  --keep_osymbols --osymbols=$medir/isymbols.txt \
  $medir/transitions.fsm "$@"
sta=$?

rm -rf $medir
exit $sta
