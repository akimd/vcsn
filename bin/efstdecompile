#! /bin/sh

# Convert a binary OpenFST file into an efsm textual file.

trans=transitions.fsm
isyms=isymbols.txt
fstprint --acceptor --save_isymbols=$isyms "$@" > $trans

cat <<EOF
#! /bin/sh

cat >isymbols.txt <<\EOFSM
$(cat $isyms)
EOFSM

cat >transitions.fsm <<\EOFSM
$(cat $trans)
EOFSM

fstcompile --acceptor --keep_isymbols --isymbols=isymbols.txt transitions.fsm "\$@"
EOF
