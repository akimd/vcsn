#! /bin/sh

pyexecdir='@PYEXECDIR@'

# _Append_ pyexecdir, not prepend, so that the user can still override
# this path via $PYTHONPATH.  Note in particular that the
# builddir-tests need to override $PYTHONPATH to use non-installed
# modules, which would them be overriden here and installed files
# would be used instead.
PYTHONPATH=$PYTHONPATH:$pyexecdir
export PYTHONPATH

help ()
{
  cat <<EOF
usage: vcsn COMMAND ARGS...

If COMMAND is "notebook", run Vaucanson as an IPython Notebook.

If COMMAND is one of the following commands, run the corresponding
TAF-Kit program:

  accessible are-equivalent are-isomorphic to-expression cat coaccessible
  complement complete compose concatenate constant-term derivation
  derived-term de-bruijn derivation divkbaseb term determinize
  difference divkbaseb double-ring eliminate-state enumerate evaluate
  expand infiltration is-ambiguous is-complete is-deterministic
  is-empty is-eps-acyclic is-normalized is-proper is-standard is-trim
  is-useless is-valid ladybird left-mult lift minimize power product
  proper right-mult shortest shuffle split standard star
  star-normal-form sum thompson transpose trim u union universal

For more information, run:

  $ vcsn COMMAND -h

For instance:

  $ vcsn derived-term -C 'lal_char(abc)_b' -e '(a+b+a)*' |
     vcsn determinize |
     vcsn minimize |
     vcsn to-expression
EOF
  exit 0
}

version ()
{
cat <<EOF
vcsn (@PACKAGE_STRING@)
<@PACKAGE_URL@>
EOF
  exit 0
}

case $1 in
  ('') ;; # We are sourced to set up the environment.
  (-e) shift 1; exec "$@";;
  (-h|--help) help;;
  (-v|--version) version;;

  (accessible|are-equivalent|are-isomorphic \
      |to-expression \
      |cat|chain|coaccessible|complement|complete \
      |compose|concatenate \
      |de-bruijn \
      |derivation|derived-term|determinize \
      |difference|divkbaseb \
      |double-ring \
      |eliminate-state|enumerate|evaluate|expand \
      |infiltration \
      |is-ambiguous|is-complete|is-deterministic \
      |is-empty|is-eps-acyclic|is-normalized|is-proper \
      |is-standard|is-trim|is-useless|is-valid \
      |ladybird|left-mult|lift \
      |minimize \
      |power|product|proper \
      |random|right-mult \
      |shuffle|shortest|split|standard|star|star-normal-form|sum \
      |thompson|transpose|trim \
      |u|union|universal)
     cmd=$(echo "$1" | sed -e 's/-/_/g')
     shift
     exec "vcsn-tafkit" "$cmd" "$@";;
  (*)
     prog="vcsn-$1"; shift; exec "$prog" "$@";;
esac

# Local Variables:
# mode: shell-script
# End:
